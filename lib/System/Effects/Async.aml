Effect = use "System/Control/Effect"

module Async :> Effect =
  type Resolved<A> = value -> { value }
  type Pending = _

  type Async<A> =
    | Resolved<A>
    | Pending

  # @inheritdoc
  from = Resolved

  # @inheritdoc
  then = async -> callback ->
    match async
    | Resolved { value } -> callback value
    | Pending -> todo!
