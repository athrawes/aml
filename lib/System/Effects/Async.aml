Effect = use "System/Control/Effect"

Async<A> :
  | Pending<A>
  | Resolved<A>

module Async<A> extends Effect =
  from = Async.Pending

  then
    : Async<A> -> (A -> Async<B>) -> Async<B>
    = async -> callback ->
      await async |> callback

  await: Async<A> -> A = todo!
