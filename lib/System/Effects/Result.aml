Effect = use "System/Control/Effect"

module Result :> Effect =
  type Ok<A> = value -> { value }
  type Error<E> = value -> { value }
  type Result<A, E>:
    | Ok<A>
    | Error<E>

  # @inheritdoc
  from = Ok

  # @inheritdoc
  then = self -> callback ->
    match self
    | Ok { value } -> callback value
    | Err -> self
