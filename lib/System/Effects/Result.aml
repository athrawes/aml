Effect = use "System/Control/Effect"

Result<A, E>:
  | Ok<A>
  | Error<E>

module Result extends Effect =
  /** @inheritdoc */
  from = Result.Ok

  /** @inheritdoc */
  then
    : Result<A, E> -> (A -> Result<B, F>) -> Result<B, E|F>
    = result -> callback ->
      match result
      | Ok [ value ] -> callback value
      | Err -> result
