Effect = use "System/Control/Effect"

type Result<A, E>:
  | Ok<A>
  | Error<E>

module Result :> Effect =
  # @inheritdoc
  from = Ok

  # @inheritdoc
  then = result -> callback ->
    match result
    | Ok [ value ] -> callback value
    | Err -> result
