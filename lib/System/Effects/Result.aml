Effect = use "System/Control/Effect"

module Result<A, E> extends Effect =
  | Ok<A>
  | Error<E>

  # @inheritdoc
  from = Ok

  # @inheritdoc
  then
    : Result<A, E> -> (A -> Result<B, F>) -> Result<B, E|F>
    = result -> callback ->
      match result
      | Ok [ value ] -> callback value
      | Err -> result
