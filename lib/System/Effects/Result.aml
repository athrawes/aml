Effect = use "System/Control/Effect"

type Ok 'ok
type Error 'err

type Result 'ok 'err =
  | Ok 'ok
  | Error 'err

instance (Result 'ok) :> Effect =
  from = Ok

  then = self callback -> match self
    | Ok value => callback value
    | Err _ => self
