Effect = use "System/Control/Effect"

type Thread<A>:
  | Pending
  | Finished<A>

module Thread extends Effect =
  # @inheritdoc
  from = Finished

  # @inheritdoc
  then = thread -> callback ->
    match thread
    | Finished [ value ] -> callback value
    | Pending -> todo!
