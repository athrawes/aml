Effect = use "System/Control/Effect"

module IO :> Effect

type Pending
type Running
type Complete 'a

type IO 'a =
  | Pending
  | Running
  | Complete 'a

from = Complete

then = self callback -> match self
  | Complete value => callback value
  | Running => todo!
  | Pending => todo!
