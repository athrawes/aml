Effect = use "Control/Effect"

module IO :> Effect

type :pending
type :running
type :complete<'a>

type :io<'a> =
  | :pending
  | :running
  | :complete<'a>

from = :complete

then = self callback -> match self
  | :complete [value] => callback value
  | :running => todo!
  | :pending => todo!
