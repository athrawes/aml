Effect = use "Control/Effect"

type :result<'ok, 'error> =
  | :ok 'ok
  | :error 'error

instance (:result<'ok, _>) :> Effect =
  from = :ok

  then = self callback ->
    match self
    | :ok [value] => callback value
    | :error [_] => self
